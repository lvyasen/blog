---
title: Go 函数
urlname: etzfws49ggogftvg
date: '2022-12-19 14:36:24 +0800'
tags:
  - go
categories:
  - Go
---

> 函数是将一组可以完成特定功能的代码语句组合在一起,成为一个功能单元

### 调用函数

> 函数在定义之后,其他代码就可以使用他,称为调用
> 优点不用重复编写代码

```go
[变量列表] = <函数名称> ([参数列表])
//变量列表用于接受函数返回值,无返回值则不需要变量
//小括号不能省略,前端 ES6 语法是可以省略小括号的
```

### return 语句

> 在函数体内使用 return 语句是可以跳出函数,并把代码执行权返回给调用者
> 无函数返回值的函数,函数末尾的 return 语句可以省略

### 多个返回值

> go 支持多个返回值
> 多个返回值定义与参数相同用小括号包裹,但是返回值允许省略变量名称
> 只有一个返回值是可以省略返回值得小括号

```go
func getUserInfo()(int,int,string){
	return 10,20,"张三"
}

//如果返回值已经命名可以选择性给他们命名,结尾必须有 return 语句

func getUserInfo()(age,height int,name string){
	name = "张三"
    age = 20
    height = 175
    return
}
```

### 可变参数

> 可变参数只能出现在参数列表末尾
> 可变长数组为切片类型,切片类型又是以数组为基础存储的基础类型,可以使用 len() 函数获取可变长参数个数
> 可以使用 for range 遍历可变长参数

```go
func variableParams(id int,args ...string){
    fmt.Printf("id 为:%d\n",id)
    fmt.Printf("可变长参数为:%v\n",args)
}
```

### 匿名函数

> 匿名函数也就是没有名称函数,但是要确保函数定义之后能够正常访问
> 保证函数可被访问
>
> 1. 定义一个变量,并且让此变量引用匿名函数
> 2. 定义完匿名函数立刻调用

```go
//以定义变量方式
var testFun = func(x,y int)int{
	return x+y
}

testFun(3,4)

//定以后立刻调用,典型的应用场景---启动并执行一个新的协程,只需要在匿名函数前面加 go 关键字即可
go func(){
    fmt.Print("新协程")
}()

//上面协程中会存在打印不出来的问题,原因是新协程还没有执行完,主协程已经退出了造成的
//使用通道解决上述问题,原理新协程向通道发送数据,主协程接受数据

var chan = make(chan byte)
go func(){
    fmt.Print("新协程")
    chan<-1
}()

<-chan
fmt.Print("主协程")

```

### 将函数作为参数传递

> 函数对象自身可以作为参数传递给其他函数
> 被传递的函数可以是匿名函数也可以是已命名函数
