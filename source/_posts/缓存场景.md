---
title: 缓存场景
urlname: rn4k8g
date: '2022-05-07 15:33:02 +0800'
tags:
  - redis
categories:
  - Redis
---

### 使用场景

#### DB 缓存减轻服务器压力

1. 上万时，服务器访问量增大，可以采用读写分离，分表分库。
2. 访问量 10 w ，100w 需要使用缓存

#### 提高系统响应

1. 在大量瞬间访问时（高并发）MYSQL 单机会因为频繁 IO 造成无法响应。
2. MySQL 的 InnoDB 是有行锁，将数据存到 redis 中也就是内存中，内存天然支持高并发。可以瞬间处理大量请求，qps 到达 10 万次读请求。

#### session 分离

登录成功后将 session 存储在 redis 中这样多个服务器可以共享 session。

#### 分布式锁

使用 redis 实现 sexNX

#### 乐观锁

同步锁和数据库中的行锁、表锁都是悲观锁。悲观锁性能比较低，响应性比较差。
高性能、高响应（秒杀）采用乐观锁 redis 可以实现乐观锁 watch+incr

### 什么是缓存？

> 缓存原指 CPU 的一种高速存储器，它先于内存与 CPU 交换数据，速度很快。现在泛指储存在计算机上的原始数据的复制集，便于快速访问。

#### 缓存分类

##### 页面缓存

页面自身对某些元素或全部元素进行存储，并保存成文件。

1. html5
2. Cookie
3. WebStorage
4. WebSql
5. indexDB
6. Application
7. Cache

##### 浏览器缓存

##### APP 缓存

原生 APP 中把数据存在内存、文件或本地数据库 SQLite 中

##### 数据库级缓存

### 3. 缓存优缺点

优点： 提升用户体验。用户体验（User Experience）：用户在使用产品过程中建立起来的一种纯主观感受。缓存的使用可以提升系统的响应能力，大大提升了用户体验。 减轻服务器压力，客户端缓存、网络端缓存减轻应用服务器压力。服务端缓存减轻数据库服务器的压力。提升系统性能，系统性能指标：响应时间、延迟时间、吞吐量、并发用户数和资源利用率等。 缓存技术可以：缩短系统的响应时间，减少网络传输时间和应用延迟时间，提高系统的吞吐量，增加系统的并发用户数，提高了数据库资源的利用率
缺点： 额外的硬件支出，缓存是一种软件系统中以空间换时间的技术，需要额外的磁盘空间和内存空间来存储数据，搭建缓存服务器集群需要额外的服务器，采用云服务器的缓存服务就不用额外的服务器了。阿里云，百度云，提供缓存服务高并发缓存失效，在高并发场景下会出现缓存失效（缓存穿透、缓存雪崩、缓存击穿）。造成瞬间数据库访问量增大，甚至崩溃。缓存与数据库数据同步，缓存与数据库无法做到数据的时时同步。Redis 无法做到主从时时数据同步，缓存并发竞争。多个 redis 的客户端同时对一个 key 进行 set 值得时候由于执行顺序引起的并发问题
