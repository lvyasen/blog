---
title: MySQL 查询优化
urlname: mf1usp3wqy7563k9
date: '2022-12-16 14:53:05 +0800'
tags:
  - mysql
categories:
  - mysql
---

> 如果把查询看作一个任务，那么它由一系列子任务组成，每个子任务都会消耗一定的时间。如果要优化查询，实际上要优化其子任务，要么消除其中一些子任务，要么减少子任务的执行次数，要么让子任务运行得更快。
> 从客户端到服务器，然后在服务器上进行语法解析，生成执行计划，执行，并给客户端返回结果。
> “执行”可以被认为是整个生命周期中最重要的阶段，这其中包括大量为了检索数据对存储引擎的调用以及调用后的数据处理，包括排序、分组等。
> 在完成这些任务的时候，查询需要在不同的地方花费时间，包括网络、CPU 计算、生成统计信息和执行计划、锁等待（互斥等待）等操作，尤其是向底层存储引擎检索数据的调用操作，这些调用需要在内存操作、CPU 操作和内存不足时导致的 I/O 操作上消耗时

## 优化数据访问

> 简单来说就是减少访问的数据！

- 确认应用程序是否存在检索大量不必要的数据。一般就是减少访问的行和列。
- 确认 Mysql 服务层是否存在分析大量不需要的数据行。

**解决办法：**

- **解决太多的行：加上 limit 语句。**
- **解决太多的列：select 选择需要的列，不要使用 select \***
- **避免执行相同的查询，如用户信息可以存储在客户端不用每次到数据库中查询。**
